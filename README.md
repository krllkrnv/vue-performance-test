# Vue Performance Benchmark

Этот проект предназначен для автоматизированного измерения производительности Vue-компонентов с использованием Lighthouse CI в Docker-контейнере. Тестируются три различных сценария пользовательского взаимодействия на различных объёмах данных.

## 📁 Структура проекта

* `src/components/*` — компоненты для сценариев `render`, `update`, `interaction`
* `public/data/` — JSON-файлы с наборами данных различных размеров
* `.lighthouseci/` — директория, в которую сохраняются отчёты
* `lhci.config.js` — конфигурация для Lighthouse CI
* `lh-aggregator.js` — скрипт для агрегации и табличного вывода результатов

## ⚙️ Предустановки

* Node.js >= 18
* Docker

## 🚀 Как запустить

### 1. Соберите проект:

```bash
npm install
npm run build
```

### 2. Соберите Docker-образ:

```bash
docker build -t lhci-vue-perf .
```

### 3. Запустите тесты:

```bash
docker run --name my-lhci -p 4173:4173 --shm-size=1g lhci-vue-perf
```

### 4. Выполните агрегацию вручную:

```bash
docker cp my-lhci:/app/.lighthouseci .\.lighthouseci
node lh-aggregator.js
```

## 🧪 Сценарии

| Сценарий      | Описание                                                                       |
| ------------- | ------------------------------------------------------------------------------ |
| `render`      | Рендеринг таблицы на разном объёме входных данных                              |
| `update`      | Обновление записей через `v-model` + `setInterval`                             |
| `interaction` | Имитация пользовательского поведения (фильтрация, сортировка, раскрытие строк) |

## 📊 Пороговые значения (assertions)

* `Performance score` >= 0.9
* `FCP` <= 900ms
* `LCP` <= 1200ms
* `Speed Index` <= 1300ms
* `TBT` <= 200ms
* `CLS` <= 0.1

## 📈 Вывод результатов

После прогона Lighthouse отчёты агрегируются из папки `.lighthouseci` с помощью `lh-aggregator.js`:

```bash
node lh-aggregator.js
```

Пример табличного вывода:

```
┌─────────┬──────────┬──────┬────────────┬────────────┬──────────────┬─────────┬─────────────┐
│ (index) │ Scenario │ Runs │ FCP        │ LCP        │ TBT          │ CLS     │ Performance │
│    0    │ '1000'   │  3   │ '296.7 ms' │ '365.2 ms' │ '19.8 ms'    │ '0.005' │ '100.0%'    │
...       ...        ...   ...          ...          ...            ...       ...           
└─────────┴──────────┴──────┴────────────┴────────────┴──────────────┴─────────┴─────────────┘
```

## 📌 Примечания

* Все данные берутся из `/public/data/dataset-*.json`
* Для тестирования используются размеры: `100`, `500`, `1000`, `2000`, `3000`
* Lighthouse прогоняет каждый сценарий по 3 раза для стабильности результатов

---

© 2025
